<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Other/Advanced-BlendTrees" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">Advanced Blend Tree Techniques | VRC School</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vrc.school/img/embed.png"><meta data-rh="true" name="twitter:image" content="https://vrc.school/img/embed.png"><meta data-rh="true" property="og:url" content="https://vrc.school/docs/Other/Advanced-BlendTrees"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="VRC School"><meta data-rh="true" name="og:type" content="website"><meta data-rh="true" name="og:url" content="https://vrc.school"><meta data-rh="true" name="og:description" content="Everything you need to know to make VRChat Avatar Systems"><meta data-rh="true" name="theme-color" content="#308BF2"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Advanced Blend Tree Techniques | VRC School"><meta data-rh="true" name="description" content="Contributors: Jellejurre, JustSleightly"><meta data-rh="true" property="og:description" content="Contributors: Jellejurre, JustSleightly"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://vrc.school/docs/Other/Advanced-BlendTrees"><link data-rh="true" rel="alternate" href="https://vrc.school/docs/Other/Advanced-BlendTrees" hreflang="en"><link data-rh="true" rel="alternate" href="https://vrc.school/docs/Other/Advanced-BlendTrees" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.10929556.css">
<script src="/assets/js/runtime~main.9fe5e6de.js" defer="defer"></script>
<script src="/assets/js/main.dbd3f194.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">VRC School</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Unity-Animations/Intro-Unity-Animation">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VRLabs/VRCSchool" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Unity-Animations/Intro-Unity-Animation">Unity Animations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Avatars/Intro-VRChat-Avatars">Avatars</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Other/Network-Sync">Other</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Network-Sync">Network Sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Parameter-Mismatching">Expression Parameter Mismatching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/DBT-Combining">Combining Layers Using Direct Blend Trees</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Other/Advanced-BlendTrees">Advanced Blend Tree Techniques</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/AAPs">Animated Animator Parameters (AAP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Scale-Friendly">Designing Scale-Friendly Systems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Stations">Stations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Sub-Animator">Sub-Animator Techniques</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Other</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Advanced Blend Tree Techniques</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>Contributors: <a href="https://jellejurre.dev/" target="_blank" rel="noopener noreferrer">Jellejurre</a>, <a href="https://vrc.sleightly.dev/" target="_blank" rel="noopener noreferrer">JustSleightly</a></p>
<h1>Advanced Blend Tree Techniques</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0736f78b3ffe4e28ad156809d48eff21">Introduction<a href="#0736f78b3ffe4e28ad156809d48eff21" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Blend Trees are powerful tools that cover a variety of use cases, from optimizing simple animator layers, to simulating complex logic equations.</p>
<p>For an introduction to Blend Trees, check out <a href="/docs/Other/DBT-Combining">Combining Layers Using Direct Blend Trees</a> to optimize simple animator layers and save animator performance.</p>
<p>This article covers more advanced applications of Blend Trees, including:</p>
<ul>
<li>Logic Gates</li>
<li>Float Remapping*</li>
<li>Math Operators*</li>
<li>Framerate Detection*</li>
<li>Float Smoothing*</li>
</ul>
<p>*Many applications are an extension of the <a href="/docs/Other/AAPs">Animated Animator Parameters (AAP)</a> article, so it’s recommended to have read its contents.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>When using Direct Blend Trees, don’t forget to make their states Write Defaults enabled, and mark their states with (WD ON) in the name.</p></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.8125)"><p>Example images in this article use <a href="https://mcardellje.gumroad.com/l/macs" target="_blank" rel="noopener noreferrer">MACS</a> for visualization.</p><ul>
<li>Numbers on the left of animations/Blend Trees show their Threshold in a 1D/2D Blend Tree</li>
<li>Names on the left of animations/Blend Trees show their Direct Blend Parameter</li>
<li>If an animation is named [Parameter][Number] it animates that AAP to that number. Output1 for example animated the Output AAP to 1</li>
</ul><p>For example, on the right you will see a Direct (<code>[DIR]</code>) Blend Tree that animates a Standard 1D (<code>[S1D]</code>) Blend Tree with a weight parameter of <code>One</code>. That Blend Tree has two children, one animation clip <code>Output-100</code> at threshold <code>-100</code>, and another animation clip <code>Output100</code> at threshold <code>100</code>.</p><p>Direct and 1D Blend Trees are the only types that follow simple mathematical rules, while the other types have advanced algorithms not meant for logic but for animation, and are at best an approximation.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 1.0625)"><p><img decoding="async" loading="lazy" alt="An example of the visualizations used in this article. This layer would save the Output AAP according to the 1D Blend Tree technique." src="/assets/images/1666596027-ecfd1a85e0bb3da8d3c982c42429f3cf.png" width="2059" height="581" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of the visualizations used in this article. This layer would save the Output AAP according to the 1D Blend Tree technique.</p><p></p></div><div class="notion-spacer"></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9fb199b125374b24bddb572cedb6185d">Logic Gates<a href="#9fb199b125374b24bddb572cedb6185d" class="hash-link" aria-label="Direct link to Logic Gates" title="Direct link to Logic Gates">​</a></h2>
<p>You can use Blend Trees to simulate the logic of logic gates (like AND, OR, NOT, XOR, etc.).</p>
<p>These can be used to animate properties based on multiple input parameters, such as toggling a GameObject off when toggling another GameObject on, or animating a blendshape only when two other toggles are enabled.</p>
<p>The following examples assume 1 = True and 0 = False.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="9703ba0671a94a4bb87cbd0636a00824">AND Gate<a href="#9703ba0671a94a4bb87cbd0636a00824" class="hash-link" aria-label="Direct link to AND Gate" title="Direct link to AND Gate">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><em>Output true, only if A</em> <em><strong>and</strong></em> <em>B are both true</em></p><p>This example demonstrates an AND Gate using parameters <code>InputA</code> and <code>InputB</code>.</p><p>Here, the only way the <code>Output</code> animation plays is if both inputs are 1 (true).</p><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Logic-AND-Gate-da078d692a2d4f4ebc7d44ee58b5af22" target="_blank" rel="noopener noreferrer">Logic: AND Gate</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 1)"><p><img decoding="async" loading="lazy" alt="An example of an AND gate." src="/assets/images/909312720-224aa6cb19689438b4b4befaab760e2e.png" width="1849" height="302" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of an AND gate.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p>This table represents all of the possible outcomes:</p><p>❌ = False</p><p>✅ = True</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><table><thead><tr><th>Input 1</th><th>Input 2</th><th>Output</th></tr></thead><tbody><tr><td>❌</td><td>❌</td><td>❌ (<code>Output 0</code>)</td></tr><tr><td>✅</td><td>❌</td><td>❌ (<code>Output 0</code>)</td></tr><tr><td>❌</td><td>✅</td><td>❌ (<code>Output 0</code>)</td></tr><tr><td>✅</td><td>✅</td><td>✅ (<code>Output 1</code>)</td></tr></tbody></table></div><div class="notion-spacer"></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="450c8be55ce34002ba2792e4fedc64ed">OR Gate<a href="#450c8be55ce34002ba2792e4fedc64ed" class="hash-link" aria-label="Direct link to OR Gate" title="Direct link to OR Gate">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><em>Output true, if either A</em> <em><strong>or</strong></em> <em>B are true</em></p><p>This example demonstrates an OR Gate using parameters <code>InputA</code> and <code>InputB</code>.</p><p>Here, the <code>Output</code> animation can play if either input is 1 (true).</p><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Logic-OR-Gate-faae12e6625640e4a0d341ce33f89560" target="_blank" rel="noopener noreferrer">Logic: OR Gate</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 1.0625)"><p><img decoding="async" loading="lazy" alt="An example of an OR gate." src="/assets/images/120177191-dfc4663aa63d7718bca919686ed30365.png" width="1849" height="302" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of an OR gate.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p>This table represents all of the possible outcomes:</p><p>❌ = False</p><p>✅ = True</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><table><thead><tr><th>Input 1</th><th>Input 2</th><th>Output</th></tr></thead><tbody><tr><td>❌</td><td>❌</td><td>❌ (<code>Output 0</code>)</td></tr><tr><td>✅</td><td>❌</td><td>✅ (<code>Output 1</code>)</td></tr><tr><td>❌</td><td>✅</td><td>✅ (<code>Output 1</code>)</td></tr><tr><td>✅</td><td>✅</td><td>✅ (<code>Output 1</code>)</td></tr></tbody></table></div><div class="notion-spacer"></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="b77f6644cec34447a646442aef856c26">NOT Gate<a href="#b77f6644cec34447a646442aef856c26" class="hash-link" aria-label="Direct link to NOT Gate" title="Direct link to NOT Gate">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><em>Output the opposite of the input</em></p><p>This example demonstrates a NOT Gate using parameter <code>Input</code>.</p><p>Here, the <code>Output 1</code> animation plays if <code>Input</code> is 0 (false).</p><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Logic-NOT-Gate-8b391c91d02246daa8d77c0df6616e2c" target="_blank" rel="noopener noreferrer">Logic: NOT Gate</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 1.125)"><p><img decoding="async" loading="lazy" alt="An example of a NOT gate." src="/assets/images/1630324986-c4a58571fb5c4bed84d898d86d18de23.png" width="1849" height="324" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of a NOT gate.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p>This table represents all of the possible outcomes:</p><p>❌ = False</p><p>✅ = True</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><table><thead><tr><th>Input</th><th>Output</th></tr></thead><tbody><tr><td>❌</td><td>✅ (<code>Output 1</code>)</td></tr><tr><td>✅</td><td>❌ (<code>Output 0</code>)</td></tr></tbody></table></div><div class="notion-spacer"></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3e18b81915e0429e90a3ddd5c08da1d9">Arbitrary 2-Bit Gates<a href="#3e18b81915e0429e90a3ddd5c08da1d9" class="hash-link" aria-label="Direct link to Arbitrary 2-Bit Gates" title="Direct link to Arbitrary 2-Bit Gates">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p>In reality, you can make any 2-bit (or even n-bit) gate by animating every possibility.</p><p>This example demonstrates animating every output possibility, where you can replace each output clip with anything you want.</p><p>For example, an XOR gate would replace the:</p><ul>
<li><code>Replace with 0,0 value</code> node for an <code>Output 0</code> animation</li>
<li><code>Replace with 0,1 value</code> node for an <code>Output 1</code> animation</li>
<li><code>Replace with 1,0 value</code> node for an <code>Output 1</code> animation</li>
<li><code>Replace with 1,1 value</code> node for an <code>Output 0</code> animation</li>
</ul><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Logic-Arbitrary-Gate-47b2638a3b984ef6a9f797ae9169bebd" target="_blank" rel="noopener noreferrer">Logic: Arbitrary Gate</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 1.125)"><p><img decoding="async" loading="lazy" alt="An example of a 2-bit gate." src="/assets/images/1893975133-32ce390074b0c78a97def7ecd9a49bbc.png" width="1849" height="446" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of a 2-bit gate.</p><p></p></div><div class="notion-spacer"></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3d68a81b04a24c1993dbcfadc6850fca">Remapping A Value<a href="#3d68a81b04a24c1993dbcfadc6850fca" class="hash-link" aria-label="Direct link to Remapping A Value" title="Direct link to Remapping A Value">​</a></h2>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.8125)"><p>You can use the “1D Blend Tree” method explained in the <a href="/docs/Other/AAPs">Animated Animator Parameters (AAP)</a> article to remap a value.</p><p>This is done by changing what gets animated at what time. If you want to remap the range <code>0</code> - <code>1</code> to the range <code>10</code> - <code>100</code>, you would make the Thresholds <code>0</code> and <code>1</code>, and the animations <code>Output 10</code> and <code>Output 100</code>.</p><p>An example where the range <code>-100</code> to <code>100</code> is remapped to <code>100</code> to <code>-100</code> is shown to the right. This is similar to a NOT Logic Gate that inverts/negates the output.</p><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Remap-Float-e071b4c66fa940f6ab2e959e41e7cf9a" target="_blank" rel="noopener noreferrer">Remap Float</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 1.0625000000000002)"><p><img decoding="async" loading="lazy" alt="An example of negating a float with an AAP. If the Source value is 100, the Target-100 animation will play with full weight, setting the Target AAP to -100." src="/assets/images/1402861232-cd21aa5c0b8319a480e6dad6c980a1f8.png" width="1849" height="323" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of negating a float with an AAP. If the Source value is 100, the Target-100 animation will play with full weight, setting the Target AAP to -100.</p><p></p></div><div class="notion-spacer"></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cb451b2bd3ee47b9bd5fd8fe66ba55a2">Math Operators<a href="#cb451b2bd3ee47b9bd5fd8fe66ba55a2" class="hash-link" aria-label="Direct link to Math Operators" title="Direct link to Math Operators">​</a></h2>
<p>Using <a href="/docs/Other/AAPs">Animated Animator Parameters (AAP)</a>, you can do the four basic mathematical operations (though with some caveats); Addition (<code>+</code>) , Subtraction (<code>-</code>), Multiplication (<code>*</code>), and Division (<code>/</code>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1b6b02e8d0d8431eb1bd26c5a95831da">Addition<a href="#1b6b02e8d0d8431eb1bd26c5a95831da" class="hash-link" aria-label="Direct link to Addition" title="Direct link to Addition">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>Addition can be accomplished by animating an AAP twice in the same Direct Blend Tree, causing the effects to stack.</p><p>In the first example, we will use the 1D Blend Tree method to animate the output value.</p><p>This can include negative values as inputs too, but is lower on precision and only works within a set range.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of adding two values by animating the Output AAP in two 1D Blend Trees in a Direct Blend Tree." src="/assets/images/937898130-d851628e6dcf131b93f07568f99ac5e7.png" width="1849" height="370" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of adding two values by animating the Output AAP in two 1D Blend Trees in a Direct Blend Tree.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>In the second example, we will use the Direct Blend Child animation method to animate the output value.</p><p>This can only take positive values as inputs and relies on the Output being weighted to 0 by default, but has higher precision and works for any positive number.</p><p>Example templates can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Math-Addition-89526aae758d4cc2afca3ab1cf10a1ca" target="_blank" rel="noopener noreferrer">Math: Addition</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of adding two values by animating the Output AAP in two animation children in a Direct Blend Tree." src="/assets/images/1773078877-1a235be257de122b43aea20e5f388815.png" width="1849" height="292" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of adding two values by animating the Output AAP in two animation children in a Direct Blend Tree.</p><p></p></div><div class="notion-spacer"></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3862a0cf896d419ab0f737966d957a6c">Subtraction<a href="#3862a0cf896d419ab0f737966d957a6c" class="hash-link" aria-label="Direct link to Subtraction" title="Direct link to Subtraction">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>Subtraction is similar to Addition but while negating the second parameter.</p><p>The first example uses the 1D Blend Tree method.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of subtracting two values by animating the Output AAP in two 1D Blend Trees in a Direct Blend Tree. Note how the bottom blend tree animated -100 at 100 and vice versa." src="/assets/images/854792473-d6d0955a80e9e0da61369b8b4e7726c8.png" width="1849" height="365" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of subtracting two values by animating the Output AAP in two 1D Blend Trees in a Direct Blend Tree. Note how the bottom blend tree animated -100 at 100 and vice versa.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>The second example uses the Direct Blend Tree Child method.</p><p>Example templates can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Math-Subtraction-d95e7608062b414c8d73422546f01161" target="_blank" rel="noopener noreferrer">Math: Subtraction</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of subtracting two values by animating the Output AAP in two animation children in a Direct Blend Tree." src="/assets/images/215422814-241173b47861c3a027321e72fb25294f.png" width="1849" height="302" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of subtracting two values by animating the Output AAP in two animation children in a Direct Blend Tree.</p><p></p></div><div class="notion-spacer"></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="47d92e363be340f799fd95b98eb9c337">Multiplication<a href="#47d92e363be340f799fd95b98eb9c337" class="hash-link" aria-label="Direct link to Multiplication" title="Direct link to Multiplication">​</a></h3>
<p>Multiplication is done by nesting Blend Trees as children of the DBT, as the child of a child Blend Tree gets played by the weight of both Blend Trees multiplied.</p>
<p>Both methods can only take in positive values due to the math only working when the lower value is 0, and the Direct child only works when the default value is 0.</p>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>The first example uses the 1D Blend Tree method.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of multiplying two values by animating the value through two 1D Blend Trees. Note that both inputs here go up to 10, and the last animation, Output 100, animates those two values multiplied together." src="/assets/images/1300750050-6b0ae11e478e854eadbe8c2e5b99004b.png" width="1849" height="317" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of multiplying two values by animating the value through two 1D Blend Trees. Note that both inputs here go up to 10, and the last animation, Output 100, animates those two values multiplied together.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>The second example uses the Direct Blend Tree Child method.</p><p>Example templates can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Math-Multiplication-5ffb4806a88d4d18b563dd9f100f7e9c" target="_blank" rel="noopener noreferrer">Math: Multiplication</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of multiplying two values by animating the value through two Direct Blend Trees." src="/assets/images/1036265510-85c13793127bb45b0499607fa1f6e37b.png" width="1849" height="216" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of multiplying two values by animating the value through two Direct Blend Trees.</p><p></p></div><div class="notion-spacer"></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7229acb83ba7465dbd50a2236b134031">Division<a href="#7229acb83ba7465dbd50a2236b134031" class="hash-link" aria-label="Direct link to Division" title="Direct link to Division">​</a></h3>
<p>Division is done by using the Normalize Blend Values option, which takes the Blend Parameters of a Direct Blend Tree, and divides them (and therefore the outputs) by the sum of all Blend Parameters, meaning the final used Blend Parameters are normalized (add up to 1).</p>
<p>Note that this only happens if the total sum of Blend Parameters is greater than 1. We can abuse this by animating a dummy animation (that animates nothing) with our input parameter, while animating the Output with a weight of 1.</p>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>For example, if the value of <code>Input</code> is <code>2</code>, then:</p><ul>
<li><code>Dummy</code> gets animated with weight <code>2</code> and <code>Output1</code></li>
<li>This means the total weight is <code>1</code> + <code>2</code> = <code>3</code></li>
<li>So then because this is greater than 1, all weights get divided by <code>3</code></li>
<li>So <code>Dummy</code> gets animated with weight <code>2/3</code> and <code>Output</code> gets animated with weight <code>1/3</code>, giving us our output value of <code>1/3</code></li>
</ul><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Math-Division-dff719b5573143fea038b904a616c2fe" target="_blank" rel="noopener noreferrer">Math: Division</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of division. Note that this doesn’t divide by Input, but by (1 + Input)." src="/assets/images/1047846400-8655e546300a0b22049fe0a17548b980.png" width="1849" height="295" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of division. Note that this doesn’t divide by Input, but by (1 + Input).</p><p></p></div><div class="notion-spacer"></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="f038ff5bbe1243d69c0bb2b1c7b7bc2c">Frame Time Detection<a href="#f038ff5bbe1243d69c0bb2b1c7b7bc2c" class="hash-link" aria-label="Direct link to Frame Time Detection" title="Direct link to Frame Time Detection">​</a></h2>
<p>Blend Trees get run once every frame. So at different framerates, the effects that happen over time (like float smoothing) will happen at different rates. To counteract this, you can read out the frame time (time that has passed since last frame), and multiply your effects by this number, so that over the course of a second, the full effect happens once.</p>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5000000000000001)"><p>To do this, we keep track of an ever increasing Time parameter, and the value it had last frame, and subtract these to get the frame time.</p><p>This setup requires two layers. One layer playing a time animation, and one layer processing that into the frame time.</p><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Frame-Time-Measurement-18d4f473a4574f919ac3b5f9eba74825" target="_blank" rel="noopener noreferrer">Frame Time Measurement</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p><img decoding="async" loading="lazy" alt="The layout of Frame Time detection layers." src="/assets/images/460877383-7fa68f7e51a01ef91070b068f8f2905d.png" width="1849" height="339" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">The layout of Frame Time detection layers.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p>The Time Animation would be set up with two key frames, one at 0 and one at a frame far away, This example uses 20000 seconds (120000 frames). In this animation, the Time AAP would be animated between 0 and 20000, with Both Tangents set to Linear. This animation would have Loop Time on and be playing on the top layer.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p><img decoding="async" loading="lazy" alt="An example Time animation." src="/assets/images/30392290-7168e2d930078ee3fd2ec43217f1acb6.png" width="714" height="138" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example Time animation.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p>Then, the next layer is a Direct Blend Tree which performs two operations.</p><p>First it sets <code>FrameTime</code> = <code>Time</code> - <code>LastTime</code> (see ). Lastly, it sets <code>LastTime</code> to <code>Time</code> so it can be used next frame.</p><p>Now the <code>FrameTime</code> is set to the difference between the time at the current and previous frame, a.k.a. the frame time. This can be used in your other Blend Trees.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p><img decoding="async" loading="lazy" alt="An example Frame Time measurement layer." src="/assets/images/946887407-3348e4e21632f8b23219dc960199eeff.png" width="1849" height="314" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example Frame Time measurement layer.</p><p></p></div><div class="notion-spacer"></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="460ada1c048a4e618e8370a52b175634">Smoothing<a href="#460ada1c048a4e618e8370a52b175634" class="hash-link" aria-label="Direct link to Smoothing" title="Direct link to Smoothing">​</a></h2>
<p>Blend Trees can also be used to let a float smoothly change from one value to another. There are currently two ways to do this: Exponentially and Linearly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bffb17cfe885400fb44b9d2f9ff70e94">Exponential Smoothing<a href="#bffb17cfe885400fb44b9d2f9ff70e94" class="hash-link" aria-label="Direct link to Exponential Smoothing" title="Direct link to Exponential Smoothing">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.75)"><p>In Exponential Smoothing, the difference between the current value and the target gets exponentially smaller every frame. It uses three 1D Blend Trees.</p><p>We use an 1D Blend Tree to blend between setting <code>Smoothed Value</code> to itself and setting it to the actual <code>Value</code>.</p><p>If you have a Blend Tree where you set a value A at threshold 0 and value B at threshold 1, the math is as follows for a 1d Blend Tree with parameter f:</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>B</mi><mi>l</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>A</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="1em"></mspace><mi>f</mi><mo>≤</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>A</mi><mo>∗</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>f</mi><mo stretchy="false">)</mo><mo>+</mo><mi>B</mi><mo>∗</mo><mi>f</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="1em"></mspace><mn>0</mn><mo>≤</mo><mi>f</mi><mo>≤</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>B</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="1em"></mspace><mi>f</mi><mo>≥</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">Blend(f) = \begin{cases}
A  &amp; \quad f \leq 0 \\
A * (1 - f) + B * f  &amp; \quad 0 \leq f \leq 1 \\
B  &amp; \quad f \geq 1
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">Bl</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.91em"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em"><span style="top:-2.2em"><span class="pstrut" style="height:3.15em"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.192em"><span class="pstrut" style="height:3.15em"></span><span style="height:0.316em;width:0.8889em"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewBox="0 0 888.89 316" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"></path></svg></span></span><span style="top:-3.15em"><span class="pstrut" style="height:3.15em"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em"><span class="pstrut" style="height:3.15em"></span><span style="height:0.316em;width:0.8889em"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewBox="0 0 888.89 316" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"></path></svg></span></span><span style="top:-4.6em"><span class="pstrut" style="height:3.15em"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em"><span style="top:-4.41em"><span class="pstrut" style="height:3.008em"></span><span class="mord"><span class="mord mathnormal">A</span></span></span><span style="top:-2.97em"><span class="pstrut" style="height:3.008em"></span><span class="mord"><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span><span style="top:-1.53em"><span class="pstrut" style="height:3.008em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em"><span style="top:-4.41em"><span class="pstrut" style="height:3.008em"></span><span class="mord"><span class="mspace" style="margin-right:1em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">0</span></span></span><span style="top:-2.97em"><span class="pstrut" style="height:3.008em"></span><span class="mord"><span class="mspace" style="margin-right:1em"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span></span></span><span style="top:-1.53em"><span class="pstrut" style="height:3.008em"></span><span class="mord"><span class="mspace" style="margin-right:1em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><p>So this means that since our <code>S``moothAmount</code> is always between 0 and 1, our value would be:</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>m</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>d</mi><mi>V</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>=</mo><mi>V</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>∗</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>S</mi><mi>m</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>A</mi><mi>m</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mo>+</mo><mi>S</mi><mi>m</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>d</mi><mi>V</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>∗</mo><mi>S</mi><mi>m</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>A</mi><mi>m</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">SmoothedValue = Value * (1-SmoothAmount) + SmoothedValue * SmoothAmount</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">m</span><span class="mord mathnormal">oo</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">m</span><span class="mord mathnormal">oo</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">A</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">m</span><span class="mord mathnormal">oo</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">m</span><span class="mord mathnormal">oo</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">A</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.9375000000000001)"><p><img decoding="async" loading="lazy" alt="An example of an Exponential Smoothing Blend Tree. Here the bounds are chosen to be [-100, 100], but you can change these as needed." src="/assets/images/711673686-c3324fe51e58f4026cd32b9cdff51864.png" width="1849" height="387" class="img_ev3q"></p></div><div class="notion-spacer"></div></div>
<p>So the higher <code>SmoothAmount</code> is, the more it will use the old value instead of the new one, so it’s gonna “lag behind” more. Feel free to try this yourself to get a feel for what this value does.</p>
<p>Example templates can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Smoothing-Exponential-019e9e69f617451dabd8d64554e09671" target="_blank" rel="noopener noreferrer">Smoothing (Exponential)</a>, <a href="https://notes.sleightly.dev/justsleightly/Smoothed-Float-Full-c3a1c86b492b4a23bf230f3549ec5e7c" target="_blank" rel="noopener noreferrer">Smoothed Float (Full)</a> and <a href="https://notes.sleightly.dev/justsleightly/Smoothed-Float-Half-21fe757e52da4e589e2b30997f459f44" target="_blank" rel="noopener noreferrer">Smoothed Float (Half)</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="382b25efca9e461cb97de8d819bdc057">Linear Smoothing<a href="#382b25efca9e461cb97de8d819bdc057" class="hash-link" aria-label="Direct link to Linear Smoothing" title="Direct link to Linear Smoothing">​</a></h3>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.4375)"><p>In Linear Smoothing, the amount that gets added or subtracted is the same every frame, so over the frames it’s linear.</p><p>The top two 1D Blend Trees set Delta (Difference) = Value - Smoothed Value</p><p>The bottom two 1D Blend Trees set</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>m</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>d</mi><mi>V</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>=</mo><mi>S</mi><mi>m</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>d</mi><mi>V</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>+</mo><mi>C</mi><mi>l</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo stretchy="false">(</mo><mo>−</mo><mi>S</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo separator="true">,</mo><mi>S</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo separator="true">,</mo><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SmoothedValue = SmoothedValue + Clamp(-StepSize, StepSize, Delta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">m</span><span class="mord mathnormal">oo</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">m</span><span class="mord mathnormal">oo</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.01968em">Cl</span><span class="mord mathnormal">am</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathnormal">St</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.05764em">pS</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">St</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.05764em">pS</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">De</span><span class="mord mathnormal">lt</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></p><p>To clarify, the Linear Blend Blend Tree does the following:</p><ul>
<li>If Delta &lt; -0.1, we subtract Step Size from the Smoothed Value.</li>
<li>If -0.1 &lt; Delta &lt; 0.1, we blend Delta between itself and the Step Size</li>
<li>If Delta &gt; 0.1, we add Step Size too the Smoothed value.</li>
</ul><p>Therefore we always take a step of <code>StepSize</code> in the direction of the Value, and thus get Linear Smoothing.</p><p>Example template can be downloaded from <a href="https://notes.sleightly.dev/justsleightly/Smoothing-Linear-c9ce813388b54f7a949d4e84473730ec" target="_blank" rel="noopener noreferrer">Smoothing (Linear)</a>.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5625)"><p><img decoding="async" loading="lazy" alt="An example of an Linear Smoothing Blend Tree." src="/assets/images/632094979-c39592c3ac4b919f8a1006bba4648aea.png" width="1849" height="659" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">An example of an Linear Smoothing Blend Tree.</p><p></p></div><div class="notion-spacer"></div></div>
<p>By adding a Frame Time Detection layer and multiplying <code>StepSize</code> by the frame time before using it, this can be frame time independent.</p>
<hr>
<div style="text-align:right">Last Updated: 31 March 2024 08:54:00</div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/VRLabs/VRCSchool/tree/main/docs/Other/Advanced-BlendTrees.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Other/DBT-Combining"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Combining Layers Using Direct Blend Trees</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Other/AAPs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Animated Animator Parameters (AAP)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0736f78b3ffe4e28ad156809d48eff21" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#9fb199b125374b24bddb572cedb6185d" class="table-of-contents__link toc-highlight">Logic Gates</a><ul><li><a href="#9703ba0671a94a4bb87cbd0636a00824" class="table-of-contents__link toc-highlight">AND Gate</a></li><li><a href="#450c8be55ce34002ba2792e4fedc64ed" class="table-of-contents__link toc-highlight">OR Gate</a></li><li><a href="#b77f6644cec34447a646442aef856c26" class="table-of-contents__link toc-highlight">NOT Gate</a></li><li><a href="#3e18b81915e0429e90a3ddd5c08da1d9" class="table-of-contents__link toc-highlight">Arbitrary 2-Bit Gates</a></li></ul></li><li><a href="#3d68a81b04a24c1993dbcfadc6850fca" class="table-of-contents__link toc-highlight">Remapping A Value</a></li><li><a href="#cb451b2bd3ee47b9bd5fd8fe66ba55a2" class="table-of-contents__link toc-highlight">Math Operators</a><ul><li><a href="#1b6b02e8d0d8431eb1bd26c5a95831da" class="table-of-contents__link toc-highlight">Addition</a></li><li><a href="#3862a0cf896d419ab0f737966d957a6c" class="table-of-contents__link toc-highlight">Subtraction</a></li><li><a href="#47d92e363be340f799fd95b98eb9c337" class="table-of-contents__link toc-highlight">Multiplication</a></li><li><a href="#7229acb83ba7465dbd50a2236b134031" class="table-of-contents__link toc-highlight">Division</a></li></ul></li><li><a href="#f038ff5bbe1243d69c0bb2b1c7b7bc2c" class="table-of-contents__link toc-highlight">Frame Time Detection</a></li><li><a href="#460ada1c048a4e618e8370a52b175634" class="table-of-contents__link toc-highlight">Smoothing</a><ul><li><a href="#bffb17cfe885400fb44b9d2f9ff70e94" class="table-of-contents__link toc-highlight">Exponential Smoothing</a></li><li><a href="#382b25efca9e461cb97de8d819bdc057" class="table-of-contents__link toc-highlight">Linear Smoothing</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">VRLabs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vrlabs.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.vrlabs.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/VRLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/vrlabsdev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">JustSleightly</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://links.sleightly.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Links<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.sleightly.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://store.sleightly.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Store<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.sleightly.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/VRLabs/VRCSchool" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 VRLabs, Inc  & JustSleightly. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>