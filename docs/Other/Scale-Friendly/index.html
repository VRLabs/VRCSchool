<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Other/Scale-Friendly" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">Designing Scale-Friendly Systems | VRC School</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vrc.school/img/embed.png"><meta data-rh="true" name="twitter:image" content="https://vrc.school/img/embed.png"><meta data-rh="true" property="og:url" content="https://vrc.school/docs/Other/Scale-Friendly"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="VRC School"><meta data-rh="true" name="og:type" content="website"><meta data-rh="true" name="og:url" content="https://vrc.school"><meta data-rh="true" name="og:description" content="Everything you need to know to make VRChat Avatar Systems"><meta data-rh="true" name="theme-color" content="#308BF2"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Designing Scale-Friendly Systems | VRC School"><meta data-rh="true" name="description" content="Contributors: Jellejurre, JustSleightly"><meta data-rh="true" property="og:description" content="Contributors: Jellejurre, JustSleightly"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://vrc.school/docs/Other/Scale-Friendly"><link data-rh="true" rel="alternate" href="https://vrc.school/docs/Other/Scale-Friendly" hreflang="en"><link data-rh="true" rel="alternate" href="https://vrc.school/docs/Other/Scale-Friendly" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.10929556.css">
<script src="/assets/js/runtime~main.e656804c.js" defer="defer"></script>
<script src="/assets/js/main.da5e800f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">VRC School</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Unity-Animations/Intro-Unity-Animation">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VRLabs/VRCSchool" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Unity-Animations/Intro-Unity-Animation">Unity Animations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Avatars/Intro-VRChat-Avatars">Avatars</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Other/Benchmarks">Other</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Benchmarks">Unity/VRChat Performance Benchmarks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Network-Sync">Network Sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Parameter-Mismatching">Expression Parameter Mismatching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/DBT-Combining">Combining Layers Using Direct Blend Trees</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Advanced-BlendTrees">Advanced Blend Tree Techniques</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/AAPs">Animated Animator Parameters (AAP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Other/Scale-Friendly">Designing Scale-Friendly Systems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Stations">Stations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Other/Sub-Animator">Sub-Animator Techniques</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Other</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Designing Scale-Friendly Systems</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>Contributors: <a href="https://jellejurre.dev/" target="_blank" rel="noopener noreferrer">Jellejurre</a>, <a href="https://vrc.sleightly.dev/" target="_blank" rel="noopener noreferrer">JustSleightly</a></p>
<h1>Designing Scale-Friendly Systems</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4f1097a40aab4bee9d4bb699a8ba52be">Scaling in VRChat<a href="#4f1097a40aab4bee9d4bb699a8ba52be" class="hash-link" aria-label="Direct link to Scaling in VRChat" title="Direct link to Scaling in VRChat">​</a></h2>
<p>VRChat recently added Avatar Scaling to the game. Players can scale their avatar using the hand circle menu between the minimum and maximum. By default, these values are 0.2m and 5m, but these can be set by worlds to be anything from 0.1m to 100m, and worlds can even force avatars to be a certain height. Worlds can also disable scaling if they want, but by default, scaling is enabled.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Avatars that are uploaded with sizes outside of the default size range won’t be scaled by default, but will be set to a value inside of the range when the user uses avatar scaling or when the world forces a certain avatar height. You can’t upload an avatar with a shoulder height lower than 0.1m, but you can upload an avatar with any height above that.</p></div></div>
<p>This scaling update may break older systems, which use static offsets in certain places, and aren’t designed to change scale. This article will go over how to design systems or modify systems to work in this new scaling environment.</p>
<p>The general rule for creating scale-friendly systems is that whenever the avatar scales, you want all relative effects to be the same. This means that for example the distance between two objects, or the distance an audio source can play, should scale with avatar height.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>It seems that VRChat currently does not late sync scale parameters. All scale related float parameters seem to be set to 1.0 for late joiners. Hopefully this will be fixed soon.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dd70c591f3af4678808f9f5ec08052b9">Shader Material Properties<a href="#dd70c591f3af4678808f9f5ec08052b9" class="hash-link" aria-label="Direct link to Shader Material Properties" title="Direct link to Shader Material Properties">​</a></h3>
<p>Depending on the shader and what properties you use, some values may be absolute instead of relative, and not scale well with your avatar. Examples include many properties that utilize offsets from the surface/UV, such as vertex offset, point-to-point dissolve start/end values, and geometric dissolve offsets.</p>
<p>You may be able to resolve some of these properties with avatar scale with , or in some cases even utilizing <a href="https://www.poiyomi.com/general/textures-and-colors#vertex-colors" target="_blank" rel="noopener noreferrer">vertex colors</a>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8415330c761649419b5c753f3f2d3c1b">Constraint Components<a href="#8415330c761649419b5c753f3f2d3c1b" class="hash-link" aria-label="Direct link to Constraint Components" title="Direct link to Constraint Components">​</a></h3>
<p>Constraint components all respond quite well to scaling, since offsets are relative to constraint target scale. The only exception to this is <u>parent constraint offsets</u>. Their offsets are absolute, and don’t scale with target scale in Unity.</p>
<p>VRChat has implemented a change for this, where in VRChat, parent constraints offsets scale with target scale. This means that parent constraints react differently in Unity and in VRChat.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The latest version of the <a href="https://github.com/lyuma/Av3Emulator" target="_blank" rel="noopener noreferrer">AV3 Emulator</a> emulates this relative behaviour in unity.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="93b7d7e7b17a48508919828c21918537">World Constraints<a href="#93b7d7e7b17a48508919828c21918537" class="hash-link" aria-label="Direct link to World Constraints" title="Direct link to World Constraints">​</a></h3>
<p>World constraints require a bit more care to work properly with scale, since we don’t want the offset from the world origin to scale (which would move the object), but we do want the object in the container to scale.</p>
<p>To achieve this, you would want to add a Scale constraint to the <code>World Constraint</code> GameObject, with as source the World prefab. This will make it so the object doesn’t move when scaling.</p>
<p>If you want the prop itself to scale with your avatar, you would want to add another scale constraint to the <code>Container</code> GameObject with the source as your avatar.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The latest version of the <a href="https://github.com/VRLabs/World-Constraint" target="_blank" rel="noopener noreferrer">VRLabs’ World Constraint</a> has the World prefab scale constraint already added. Note that this doesn’t include the prop scaling, you will need to add this yourself if you want it.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="08a040cd49f24569aea40fdfdcefb396">Cloth Components<a href="#08a040cd49f24569aea40fdfdcefb396" class="hash-link" aria-label="Direct link to Cloth Components" title="Direct link to Cloth Components">​</a></h3>
<p>Cloth components scale on their own except for that they need to be disabled and re-enabled for the offsets to be calculated properly. This is currently done in the latest VRChat Open Beta when scaling.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The latest version of the <a href="https://github.com/lyuma/Av3Emulator" target="_blank" rel="noopener noreferrer">AV3 Emulator</a> on the master branch emulates this cloth toggle behaviour in unit.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3afc6815bcfd4829947900eede2a48ab">Particle Systems<a href="#3afc6815bcfd4829947900eede2a48ab" class="hash-link" aria-label="Direct link to Particle Systems" title="Direct link to Particle Systems">​</a></h3>
<p>For particle systems to scale, their <code>Scaling Mode</code> needs to be set to <code>Hierarchy Scale</code>. However, even if this property is set, you might need to animate other properties with avatar scale, such as properties involving speed/gravity/velocity. How this is done is elaborated on in the  section.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="424514ad999e4dabab50eabbea734dab">Physics Components<a href="#424514ad999e4dabab50eabbea734dab" class="hash-link" aria-label="Direct link to Physics Components" title="Direct link to Physics Components">​</a></h3>
<p>Some properties of Rigidbodies and Joints may not scale as intended, and may require certain properties (such as limits/velocity) to be scaled along with avatar size. How this is done is elaborated on in the  section.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1535ebb070bd45d2bf0d4074db88b863">Audio Sources<a href="#1535ebb070bd45d2bf0d4074db88b863" class="hash-link" aria-label="Direct link to Audio Sources" title="Direct link to Audio Sources">​</a></h3>
<p>These components don’t scale very well either, and will likely require their falloff distance property to be scaled along with avatar size. How this is done is elaborated on in the  section.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="f29427e831b748a887a288edc489d925">Scale Friendly Animating<a href="#f29427e831b748a887a288edc489d925" class="hash-link" aria-label="Direct link to Scale Friendly Animating" title="Direct link to Scale Friendly Animating">​</a></h2>
<p>To animate properties relative to avatar scale, VRC has provided 5 <a href="https://creators.vrchat.com/avatars/animator-parameters/#avatar-scaling-parameters" target="_blank" rel="noopener noreferrer">read-only native parameters</a></p>
<ul>
<li><code>ScaleModified</code> is a bool that returns True if your Avatar is not your default scale via avatar scaling</li>
<li><code>ScaleFactor</code> and <code>ScaleFactorInverse</code> are relative values based on your Avatar’s default scale upon upload, which are more effective for quick drop in Direct Blend Tree (DBT) multiplications to modify your existing animation clips made for your current avatar</li>
<li><code>EyeHeightAsMeters</code> and <code>EyeHeightAsPercent</code> are absolute values based on the World’s units that are more effective if you need a more universal solution, such as for prefabs/systems that need to be applied to any avatar at any default size, and may take more effort/math to convert your animation clips to work with</li>
<li><code>EyeHeightAsPercent</code> is the only parameter that is normalized and compatible with state motion time (with values ranging from 0.0 - 1.0), as long as the avatar height is between 0.2m and 5m (which are the default limits)</li>
<li><code>EyeHeightAsMeters</code> is the only one that scales linearly beyond the 5m Avatar scale limit towards the Udon max of 100m</li>
</ul>
<p>Testing Avatars 3.0 animations can be done using the <a href="https://github.com/lyuma/Av3Emulator" target="_blank" rel="noopener noreferrer">https://github.com/lyuma/Av3Emulator</a> which can be found as a <a href="https://vcc.docs.vrchat.com/vpm/curated-community-packages" target="_blank" rel="noopener noreferrer">curated package</a> in the “Manage Projects” section of the <a href="https://vcc.docs.vrchat.com/" target="_blank" rel="noopener noreferrer">VRChat Creator Companion</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12ffd925c0fd4776b0116e01ead50121">Using <code>EyeHeightAsMeters</code> with Direct Blend Trees<a href="#12ffd925c0fd4776b0116e01ead50121" class="hash-link" aria-label="Direct link to 12ffd925c0fd4776b0116e01ead50121" title="Direct link to 12ffd925c0fd4776b0116e01ead50121">​</a></h3>
<p>This method is one of the most universal ways to make an animation clip scale. Its primary advantage is being compatible with scaling both static and non-static clips, as every keyframe in the animation clip will have it’s value multiplied with scale. Its limitations are that <u>all the values</u> are scaled with your Avatar scale, and that they are scaled <u>linearly</u>. If you have any properties that should not have their values multiplied (such as weights normalized between 0 and 1), you may need to separate those properties out to another animation clip.</p>
<p>If you have a value you want to convert to scale linearly with avatar scale, you can divide this value by your Avatar’s Viewpoint Y value to get the value per meter, and animate this with a Direct Blend Tree (DBT) with blend parameter EyeHeightAsMeters to get a linearly scaling animation.</p>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p>As an example, say your particle system has a velocity of 3.0 and your avatar has a default viewpoint Y height of 1.5m.</p><p>You would then make an Animation Clip with two keyframes, with both frames setting the velocity to <code>3.0 / 1.5 = 2.0</code>. This animation would be played in a Direct Blend Tree with <code>EyeHeightAsMeters</code> as a direct blend parameter.</p><p>In game, say your height is 1.5m, the actual value would then be <code>Value * EyeHeightAsMeters</code> or <code>2.0 * 1.5 = 3.0</code>, as expected.</p><p>If you change your avatar scale to 3.0m (twice as big), the values would be <code>2.0 * 3.0 = 6.0</code> (twice as large). Your value now scales linearly with avatar height.</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p><img decoding="async" loading="lazy" alt="The Direct Blend Tree from the example." src="/assets/images/Scale-Friendly.d81eea7b-63bc-4b00-9a1e-24ae1646ebe8-d679046903a7bfa45d90fd2fb9fec4b5.png" width="611" height="264" class="img_ev3q"><br></p><p style="color:grey;font-style:italic">The Direct Blend Tree from the example.</p><p></p></div><div class="notion-spacer"></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This will work by default for values above 1 meter, but if you want it to work for values below 1 meter, you will need to put everything you’re animating in the clip at 0 when uploading, or you would need a reset layer above this one where you animate the values to 0. In our example, we could either set the particle system velocity to 0 when uploading, or animate it to 0 in a layer above this one.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>When mixing a WD On Direct Blend Tree with WD Off states in the same animator layer, you may experience issues if there are any transitions outbound of the DBT with transition duration. This includes AnyState transitions. This behaviour is only observed in VRChat after upload, and not in the native Unity Editor.</p></div></div>
<p>Note that, as all Direct Blend Trees, the state this Direct Blend Tree is in should be Write Defaults On, and have the text <code>(WD On)</code> be somewhere in the name of the state. More information on this can be found at the <a href="/docs/Unity-Animations/Write-Defaults">Write Defaults</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ec7c7add67b540feb0f801030327983a">Using <code>EyeHeightAsPercent</code> with Motion Time<a href="#ec7c7add67b540feb0f801030327983a" class="hash-link" aria-label="Direct link to ec7c7add67b540feb0f801030327983a" title="Direct link to ec7c7add67b540feb0f801030327983a">​</a></h3>
<p>This method’s primary advantage is being able to mix non-scaling and scaling properties together in the same animation clip, as well as being able to scale non-linearly if necessary, all without needing a Blend Tree. Its limitation is that it is only compatible with static animation clips that do not actively change values when the state is entered, because the use of Motion Time normalizes the duration of the animation clip. This is also limited to the scalable range of Avatars, and may cause unintended behaviour if worlds enforce scaling beyond the avatar scale maximum of 5 meters.</p>
<p>If you have a value you want to convert to scale linearly with avatar scale, you can divide this value by your Avatar’s Viewpoint Y value to get the value per meter (<em>unit value</em>). Afterwards, divide your <em>unit value</em> by 5 to get the value of the first keyframe of your new scale-friendly animation clip, and multiply your <em>unit value</em> by 5 to get the value of the last keyframe of your new animation clip. You can then add this animation clip to a state with motion time parameter <code>EyeHeightAsPercent</code> to get a linearly scaling animation.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ee3fabc05137428c8e2ce37b5c970316">For Shader Developers<a href="#ee3fabc05137428c8e2ce37b5c970316" class="hash-link" aria-label="Direct link to For Shader Developers" title="Direct link to For Shader Developers">​</a></h2>
<div class="notion-row"><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><p>If you are writing any shaders for your system, it is possible you may need to take scale into account for specific effects.</p><p>While animating a value on the material is always an option, if the shader is applied to a non-skinned mesh renderer, it is also possible to get the object scale directly in the shader like so:</p></div><div class="notion-spacer"></div><div class="notion-column" style="width:calc((100% - (min(32px, 4vw) * 1)) * 0.5)"><div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">float3 worldScale = float3(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	length(float3(unity_ObjectToWorld[0].x, unity_ObjectToWorld[1].x, unity_ObjectToWorld[2].x)), // scale x axis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	length(float3(unity_ObjectToWorld[0].y, unity_ObjectToWorld[1].y, unity_ObjectToWorld[2].y)), // scale y axis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	length(float3(unity_ObjectToWorld[0].z, unity_ObjectToWorld[1].z, unity_ObjectToWorld[2].z))  // scale z axis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="notion-spacer"></div></div>
<hr>
<div style="text-align:right">Last Updated: 31 March 2024 08:54:00</div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/VRLabs/VRCSchool/tree/main/docs/Other/Scale-Friendly.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Other/AAPs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Animated Animator Parameters (AAP)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Other/Stations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Stations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#4f1097a40aab4bee9d4bb699a8ba52be" class="table-of-contents__link toc-highlight">Scaling in VRChat</a><ul><li><a href="#dd70c591f3af4678808f9f5ec08052b9" class="table-of-contents__link toc-highlight">Shader Material Properties</a></li><li><a href="#8415330c761649419b5c753f3f2d3c1b" class="table-of-contents__link toc-highlight">Constraint Components</a></li><li><a href="#93b7d7e7b17a48508919828c21918537" class="table-of-contents__link toc-highlight">World Constraints</a></li><li><a href="#08a040cd49f24569aea40fdfdcefb396" class="table-of-contents__link toc-highlight">Cloth Components</a></li><li><a href="#3afc6815bcfd4829947900eede2a48ab" class="table-of-contents__link toc-highlight">Particle Systems</a></li><li><a href="#424514ad999e4dabab50eabbea734dab" class="table-of-contents__link toc-highlight">Physics Components</a></li><li><a href="#1535ebb070bd45d2bf0d4074db88b863" class="table-of-contents__link toc-highlight">Audio Sources</a></li></ul></li><li><a href="#f29427e831b748a887a288edc489d925" class="table-of-contents__link toc-highlight">Scale Friendly Animating</a><ul><li><a href="#12ffd925c0fd4776b0116e01ead50121" class="table-of-contents__link toc-highlight">Using <code>EyeHeightAsMeters</code> with Direct Blend Trees</a></li><li><a href="#ec7c7add67b540feb0f801030327983a" class="table-of-contents__link toc-highlight">Using <code>EyeHeightAsPercent</code> with Motion Time</a></li></ul></li><li><a href="#ee3fabc05137428c8e2ce37b5c970316" class="table-of-contents__link toc-highlight">For Shader Developers</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">VRLabs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vrlabs.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.vrlabs.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/VRLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/vrlabsdev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">JustSleightly</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://links.sleightly.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Links<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.sleightly.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://store.sleightly.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Store<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.sleightly.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/VRLabs/VRCSchool" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 VRLabs, Inc  & JustSleightly. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>