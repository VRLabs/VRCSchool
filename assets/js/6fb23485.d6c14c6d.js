"use strict";(self.webpackChunkvrc_school=self.webpackChunkvrc_school||[]).push([[8989],{1680:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var i=t(5893),o=t(1151);const s={title:"Animators",sidebar_position:1,slug:"Animators",last_edited:new Date("2024-04-11T09:20:00.000Z"),contributors:"[Jellejurre](https://jellejurre.dev/), [JustSleightly](https://vrc.sleightly.dev/)"},a="Animators {#8c70354f5e9c4133870de5128bbf2276}",r={id:"Unity-Animations/Animators",title:"Animators",description:"Contributors: Jellejurre, JustSleightly",source:"@site/docs/Unity-Animations/Animators.md",sourceDirName:"Unity-Animations",slug:"/Unity-Animations/Animators",permalink:"/docs/Unity-Animations/Animators",draft:!1,unlisted:!1,editUrl:"https://github.com/VRLabs/VRCSchool/tree/main/docs/Unity-Animations/Animators.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Animators",sidebar_position:1,slug:"Animators",last_edited:"2024-04-11T09:20:00.000Z",contributors:"[Jellejurre](https://jellejurre.dev/), [JustSleightly](https://vrc.sleightly.dev/)"},sidebar:"sideBar",previous:{title:"Introduction - Unity Animation",permalink:"/docs/Unity-Animations/Intro-Unity-Animation"},next:{title:"Animation Clips",permalink:"/docs/Unity-Animations/Animation-Clips"}},l={},d=[{value:"The Animator Component",id:"d697ba6243d249edb69b06e94972b4e6",level:2},{value:"Using the Animator Component",id:"598b2bb8876b4fcb80dd4d09baf6cc0c",level:2},{value:"Animation Clips are Relative to the Nearest Parent Animator Component",id:"0b8aae5ca09f449398566aaf5d4596d5",level:3},{value:"Animator Components Control The Animation Window",id:"4fb71cb5e9f7426697b5425a401bd824",level:3},{value:"Advanced Details",id:"2157fc987c2845e8bc18e9606a5557dc",level:2},{value:"The Component Fields",id:"89679d3b9ac54299afb004022b1b10f7",level:3},{value:"Controller",id:"controller",level:4},{value:"Avatar",id:"avatar",level:4},{value:"Apply Root Motion",id:"apply-root-motion",level:4},{value:"Update Mode",id:"update-mode",level:4},{value:"Culling Mode",id:"culling-mode",level:4}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.a)(),...e.components},{GreyItalicText:s,RightAlignedText:a}=n;return s||m("GreyItalicText",!0),a||m("RightAlignedText",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Contributors: ",(0,i.jsx)(n.a,{href:"https://jellejurre.dev/",children:"Jellejurre"}),", ",(0,i.jsx)(n.a,{href:"https://vrc.sleightly.dev/",children:"JustSleightly"})]}),"\n",(0,i.jsx)(n.h1,{id:"8c70354f5e9c4133870de5128bbf2276",children:"Animators"}),"\n",(0,i.jsx)(n.h2,{id:"d697ba6243d249edb69b06e94972b4e6",children:"The Animator Component"}),"\n",(0,i.jsxs)("div",{class:"notion-row",children:[(0,i.jsxs)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:[(0,i.jsx)(n.p,{children:"The Animator Component transforms Animation Clips from your Animator Controller into real changes on your avatar. While you can add it manually, Unity automatically places it on any FBX file with an avatar definition."}),(0,i.jsx)(n.p,{children:"To do this automatically:"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Open the model inspector."}),"\n",(0,i.jsxs)(n.li,{children:["Choose ",(0,i.jsx)(n.code,{children:"Create from this Model"})," or ",(0,i.jsx)(n.code,{children:"Copy From Other Avatar"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Ensure your FBX has a Humanoid or Generic rig."}),"\n"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"The Animator Component as seen in the in the GameObject Inspector",src:t(8332).Z+"",width:"691",height:"229"}),(0,i.jsx)("br",{}),(0,i.jsx)(s,{children:"The Animator Component as seen in the in the GameObject Inspector"})]})]}),(0,i.jsx)("div",{className:"notion-spacer"}),(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"The Animator component can be added to any GameObject via the Add Component button in the Inspector.",src:t(9361).Z+"",width:"519",height:"514"}),(0,i.jsx)("br",{}),(0,i.jsx)(s,{children:"The Animator component can be added to any GameObject via the Add Component button in the Inspector."})]})}),(0,i.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"598b2bb8876b4fcb80dd4d09baf6cc0c",children:"Using the Animator Component"}),"\n",(0,i.jsx)(n.p,{children:"The animator component has a few usage quirks:"}),"\n",(0,i.jsx)(n.h3,{id:"0b8aae5ca09f449398566aaf5d4596d5",children:"Animation Clips are Relative to the Nearest Parent Animator Component"}),"\n",(0,i.jsx)(n.p,{children:"When animating a GameObject, a property\u2019s target path omits the Root Animator GameObject. For example:"}),"\n",(0,i.jsxs)("div",{class:"notion-row",children:[(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsxs)(n.p,{children:["If we want to animate ",(0,i.jsx)(n.code,{children:"Child"})," relative to the Animator on the ",(0,i.jsx)(n.code,{children:"Avatar"}),", the Animation Clip\u2019s path will be ",(0,i.jsx)(n.code,{children:"Parent/Child"})]})}),(0,i.jsx)("div",{className:"notion-spacer"}),(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(8771).Z+"",width:"831",height:"356"})})}),(0,i.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,i.jsxs)("div",{class:"notion-row",children:[(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsxs)(n.p,{children:["If we want to animate ",(0,i.jsx)(n.code,{children:"Child"})," relative to the Animator on the ",(0,i.jsx)(n.code,{children:"Parent"}),", the Animation Clip\u2019s path will be ",(0,i.jsx)(n.code,{children:"Child"})]})}),(0,i.jsx)("div",{className:"notion-spacer"}),(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(2839).Z+"",width:"832",height:"351"})})}),(0,i.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,i.jsx)(n.p,{children:"Adding properties to the Animation window will add property paths relative to the nearest parent Animator component."}),"\n",(0,i.jsx)(n.h3,{id:"4fb71cb5e9f7426697b5425a401bd824",children:"Animator Components Control The Animation Window"}),"\n",(0,i.jsx)(n.p,{children:"The Animation Window changes depending on the nearest Animator component on itself or any parents."}),"\n",(0,i.jsxs)("div",{class:"notion-row",children:[(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"The Animation Window looks like this if there is no Animator detected, no Animator Controller detected, or if your Animator Controller in the Animator does not have any Animation Clips."}),"\n"]})}),(0,i.jsx)("div",{className:"notion-spacer"}),(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(9541).Z+"",width:"1299",height:"447"})})}),(0,i.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,i.jsxs)("div",{class:"notion-row",children:[(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["The Animation Window will display your selected Animation Clip if you select it from your Project window, but options such as ",(0,i.jsx)(n.code,{children:"Preview"}),", ",(0,i.jsx)(n.code,{children:"Record"}),", and other editing features will be unavailable unless you select a GameObject in your Hierarchy with an Animator somewhere above it."]}),"\n"]})}),(0,i.jsx)("div",{className:"notion-spacer"}),(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(9277).Z+"",width:"1299",height:"451"})})}),(0,i.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,i.jsxs)("div",{class:"notion-row",children:[(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"With an Animator component, an Animator Controller, and at least one Animation Clip in that controller, the Animation window will become fully available."}),"\n"]})}),(0,i.jsx)("div",{className:"notion-spacer"}),(0,i.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(3811).Z+"",width:"1299",height:"449"})})}),(0,i.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2157fc987c2845e8bc18e9606a5557dc",children:"Advanced Details"}),"\n",(0,i.jsx)(n.h3,{id:"89679d3b9ac54299afb004022b1b10f7",children:"The Component Fields"}),"\n",(0,i.jsx)(n.p,{children:"The Animator component has five fields to interact with:"}),"\n",(0,i.jsx)(n.h4,{id:"controller",children:"Controller"}),"\n",(0,i.jsxs)(n.p,{children:["The Animator Controller, found in the ",(0,i.jsx)(n.code,{children:"Controller"})," field, acts like the brain of your animations. It decides what parts of your GameObject and its children should move and how they should move by using Animation Clips at different times, weights, and masks."]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["On VRChat avatars, the Animator's ",(0,i.jsx)(n.code,{children:"Controller"})," field isn't used. Instead, it's replaced by a combination of Playable Layers in the VRC Avatar Descriptor. This change doesn't affect Animators on child GameObjects; they still use their assigned Controller."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"avatar",children:"Avatar"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Avatar"})," field provides the Animator more information on how its GameObject and its children are connected. It can be used to create Animator Layer Masks and, in the case of Humanoid Rigs, animations generic between multiple avatars. There are four types of Avatar:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Humanoid: This is the most popular Avatar, as VRChat\u2019s default animations rely on this Avatar. It has a list of Humanoid bones, which can be mapped to Transforms (GameObjects). Once these bones are mapped, you can use Humanoid Muscles in animations to move the avatar in predictable ways. This allows an animation which animates Humanoid Muscles to work on any (VRChat) avatar as long as they have their (Unity) Avatar set up correctly."}),"\n",(0,i.jsx)(n.li,{children:"Generic: This Avatar is like the Humanoid Avatar, but without all the humanoid bones/muscles. This Avatar is only useful for creating Animator Layer Masks."}),"\n",(0,i.jsx)(n.li,{children:"Legacy/None: These options doesn\u2019t create an Avatar at all, and are therefore not relevant to Animator Components."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["More information can be found at ",(0,i.jsx)(n.a,{href:"/docs/Unity-Animations/Avatar-Rigs",children:"Avatar Rigs"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"apply-root-motion",children:"Apply Root Motion"}),"\n",(0,i.jsxs)(n.p,{children:["Root motion is the change to the transform of the Animator Component\u2019s GameObject. When ",(0,i.jsx)(n.code,{children:"Apply Root Motion"})," is off, any changes to the GameObject's transform get applied on top of the current values."]}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Without ",(0,i.jsx)(n.code,{children:"Apply Root Motion"}),", if your GameObject is at ",(0,i.jsx)(n.code,{children:"(1,0,-1)"}),", and you animate ",(0,i.jsx)(n.em,{children:"Transform.Position"})," to ",(0,i.jsx)(n.code,{children:"(1,1,1)"}),", the transform would be animated to ",(0,i.jsx)(n.code,{children:"(1,1,1)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["With ",(0,i.jsx)(n.code,{children:"Apply Root Motion"}),", it would be set to ",(0,i.jsx)(n.code,{children:"(2,1,0)"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"}),' If you have a humanoid rig and use an animation to animate the "Root" Humanoid Muscle, you can tweak additional settings in the Animation clip inspector to decide which parts of the Root Motion get animated and how.']}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Apply Root Motion"})," setting doesn't affect the VRChat avatar's Animator Component because the avatar gets placed at ",(0,i.jsx)(n.code,{children:"0,0,0"})," when uploading."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"update-mode",children:"Update Mode"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"Update Mode"})})," determines when the Animator Component updates its logic. There are three modes:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Normal:"})," Updates once per frame. Timing depends on the frame rate, as we don't have access to frame time directly."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Physics:"})," Updates once per physics frame, which occurs a fixed number of times per second. This method is not affected by frame rate, making it framerate independent."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unscaled Time:"})," Updates once per frame but ignores time scale. In VRChat, this is the same as Normal since timescale doesn't change."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsx)(n.p,{children:"On the VRChat avatar Animator, this setting defaults to Normal on load. Animators on child GameObjects remain unaffected."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"culling-mode",children:"Culling Mode"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Culling Mode"})," determines what happens when all the meshes of the Animator Component are offscreen or disabled. There are three modes:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always Animate:"})," Keeps the entire avatar animated, even when offscreen."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cull Update Transforms:"})," Disables changing values of Transforms when renderers are not visible. This includes enabling/disabling GameObjects, components, and changing blendshapes. Exceptions are animating ",(0,i.jsx)(n.a,{href:"/docs/Other/AAPs",children:"Animated Animator Parameters (AAP)"})," and triggering State Machine Behaviours."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cull Completely:"})," Freezes the entire animator when renderers are not visible. No logic is processed, transitions aren't checked, and nothing is animated."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsx)(n.p,{children:"In VRChat, this setting gets set to Always Animate on the local avatar Animator, and to Cull Update Transforms on remote avatar Animators. Animators on children GameObjects are not affected by this."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(a,{children:"Last Updated: 11 April 2024 09:20:00"})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},9541:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/1061506237-9f305bbd86072528d7e2888e2859d7ee.png"},8771:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/1129557491-a3c6970e7e767e1d323578f3414b60bd.png"},3811:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/1972264678-5255d6ba7ae4f7168c9e8b373e81ac3e.png"},9361:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/2119461928-d58792a30fc68f398567cff0a1812ce5.png"},2839:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/441975135-ee747a47dcb2b063f2a00b136b8a8404.png"},9277:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/854758219-0e148a96348895a9613850964524d832.png"},8332:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/857741858-4ba0f2b299c9cdcb46dc157dd11bb02c.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>a});var i=t(7294);const o={},s=i.createContext(o);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);