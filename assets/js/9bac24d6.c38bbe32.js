"use strict";(self.webpackChunkvrc_school=self.webpackChunkvrc_school||[]).push([[9031],{3736:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=s(5893),r=s(1151);const o={title:"Network Sync",sidebar_position:0,slug:"Network-Sync",last_edited:new Date("2024-04-03T08:05:00.000Z"),contributors:"[Jellejurre](https://jellejurre.dev/), [JustSleightly](https://vrc.sleightly.dev/)"},a="Network Sync {#8f8c0b1fcdba42c9b23c4a799fead1f0}",i={id:"Other/Network-Sync",title:"Network Sync",description:"Contributors: Jellejurre, JustSleightly",source:"@site/docs/Other/Network-Sync.md",sourceDirName:"Other",slug:"/Other/Network-Sync",permalink:"/docs/Other/Network-Sync",draft:!1,unlisted:!1,editUrl:"https://github.com/VRLabs/VRCSchool/tree/main/docs/Other/Network-Sync.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{title:"Network Sync",sidebar_position:0,slug:"Network-Sync",last_edited:"2024-04-03T08:05:00.000Z",contributors:"[Jellejurre](https://jellejurre.dev/), [JustSleightly](https://vrc.sleightly.dev/)"},sidebar:"sideBar",previous:{title:"Head Chop",permalink:"/docs/Avatars/HeadChop"},next:{title:"Expression Parameter Mismatching",permalink:"/docs/Other/Parameter-Mismatching"}},l={},c=[{value:"Synced Data",id:"61dd229167b04022a03bd78a206d1267",level:2},{value:"IK Targets",id:"e445344423c24710921a4687b92f8074",level:3},{value:"Expression Parameters",id:"8af0640fe72e4859a2f57e51476cb6fe",level:3},{value:"PhysBones",id:"41fc2124e7704054a7e7d80baed66d21",level:3},{value:"Built-In VRC Parameters",id:"5c688000a928476cb7272318288f0b65",level:3},{value:"System Set Up",id:"0af0207834ec41978b1ec27eeec1d442",level:2},{value:"Object Sync",id:"3c5a45375f844b578679548f22f35203",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components},{GreyItalicText:o,RightAlignedText:a}=t;return o||p("GreyItalicText",!0),a||p("RightAlignedText",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["Contributors: ",(0,n.jsx)(t.a,{href:"https://jellejurre.dev/",children:"Jellejurre"}),", ",(0,n.jsx)(t.a,{href:"https://vrc.sleightly.dev/",children:"JustSleightly"})]}),"\n",(0,n.jsx)(t.h1,{id:"8f8c0b1fcdba42c9b23c4a799fead1f0",children:"Network Sync"}),"\n",(0,n.jsxs)("div",{class:"notion-row",children:[(0,n.jsxs)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:[(0,n.jsx)(t.p,{children:"In VRChat, only a limited amount of information is sent over the network. This is done to save costs for VRChat, as anything your avatar sends out has to be sent to every single person in the instance."}),(0,n.jsx)(t.p,{children:"Every player runs a local instance of VRChat. To make sure everyone sees approximately the same game on their screen, data has to be sent between the instances."}),(0,n.jsx)(t.p,{children:"However, sending the position of every object every frame would cost way too much bandwidth."})]}),(0,n.jsx)("div",{className:"notion-spacer"}),(0,n.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.5)"},children:(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:s(631).Z+"",width:"3840",height:"2850"})})}),(0,n.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"61dd229167b04022a03bd78a206d1267",children:"Synced Data"}),"\n",(0,n.jsx)(t.p,{children:"There are only a few things that are sent over the network, and the rest is handled locally by the VRChat instances."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"e445344423c24710921a4687b92f8074",children:"IK Targets"}),"\n",(0,n.jsx)(t.p,{children:"IK Targets are the parts of the body that get tracked by VRChat to determine how your avatar should pose. This is combined with the Playable Layers to get the final result of the movement of the Avatar. The IK targets for different platforms are:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Desktop: Head, Jaw, Left Hand, Right Hand"}),"\n",(0,n.jsx)(t.li,{children:"3pt Tracking: Head, Jaw, Left Hand, Right Hand"}),"\n",(0,n.jsx)(t.li,{children:"6pt / FBT Tracking: Head, Jaw, Left Hand, Right Hand, Hip, Left Foot, Right Foot"}),"\n",(0,n.jsx)(t.li,{children:"Note: Index players also get their fingers position synced"}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"8af0640fe72e4859a2f57e51476cb6fe",children:"Expression Parameters"}),"\n",(0,n.jsx)(t.p,{children:"The parameters marked as Synced in your Expression Parameters List are synced."}),"\n",(0,n.jsx)(t.p,{children:"This means that parameters that are not marked as synced are not sent over the network and should only be used by driving them by Parameter Drivers and by Expression Menus."}),"\n",(0,n.jsx)(t.p,{children:"Note that not the full values are sent over the network, but only some parts of them:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Int"}),": Only numbers 0 to 255 are synced."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Float"}),": Only multiples of 1/127 between -1 and 1 are synced (so -1, -126/127, \u2026 126/127, 1)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Bool"}),": True or False"]}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"41fc2124e7704054a7e7d80baed66d21",children:"PhysBones"}),"\n",(0,n.jsx)(t.p,{children:"PhysBones send their Pose Position over the network to late joiners."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"5c688000a928476cb7272318288f0b65",children:"Built-In VRC Parameters"}),"\n",(0,n.jsxs)(t.p,{children:["This includes Speed and their derived parameters, but also Gesture, Velocity, Voice, and all the other parameters found in the ",(0,n.jsx)(t.a,{href:"/docs/Avatars/VRC-Parameters",children:"Built-In VRC Parameters"}),"."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"0af0207834ec41978b1ec27eeec1d442",children:"System Set Up"}),"\n",(0,n.jsxs)("div",{class:"notion-row",children:[(0,n.jsxs)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 1.1875)"},children:[(0,n.jsx)(t.p,{children:"In VRChat, to allow for late joiners to see your systems in the way you intend them to be seen, it is best to split your Animator Controller Layers up in two sides, divided by the IsLocal parameter.  One local side that does all the logic, processes contacts, and sets Synced parameters, and one remote side that only does visualization."}),(0,n.jsx)(t.p,{children:"An example of this can be seen on the right, where the local side processes all logic of where the object is supposed to be, while the remote side processes just the visualization of where to display the object."})]}),(0,n.jsx)("div",{className:"notion-spacer"}),(0,n.jsx)("div",{class:"notion-column",style:{width:"calc((100% - (min(32px, 4vw) * 1)) * 0.8125)"},children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.img,{alt:"An example late join synced system.",src:s(7392).Z+"",width:"973",height:"899"}),(0,n.jsx)("br",{}),(0,n.jsx)(o,{children:"An example late join synced system."})]})}),(0,n.jsx)("div",{className:"notion-spacer"})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"3c5a45375f844b578679548f22f35203",children:"Object Sync"}),"\n",(0,n.jsxs)(t.p,{children:["Generally, most objects don\u2019t need to have their position synced, as they are connected to your body. However, any object that gets world dropped using a ",(0,n.jsx)(t.a,{href:"https://github.com/VRLabs/World-Constraint",children:"World Constraint"})," will not appear in the right spot for late joiners."]}),"\n",(0,n.jsxs)(t.p,{children:["This can be remedied by using one of VRLabs\u2019 Sync packages. Right now the only publicly available one is the ",(0,n.jsx)(t.a,{href:"https://github.com/VRLabs/15-Bits-Position-Rotation-Networking",children:"15-Bit-Position-Rotation-Networking"})," package, or ",(0,n.jsx)(t.a,{href:"https://github.com/JuzoVR/WorldSync",children:"Juzo\u2019s World Sync"}),", though that one can only be used through the Non-Destructive Avatar Systems VRCFury and Modular Avatar, so it can\u2019t be fully installed in the editor."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(a,{children:"Last Updated: 03 April 2024 08:05:00"})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}function p(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},631:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/1181766882-0a4a18724c099b9612f36c32f2019a56.png"},7392:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/images/634370300-a3beb13b5487eed508488a943be8b51f.png"},1151:(e,t,s)=>{s.d(t,{Z:()=>i,a:()=>a});var n=s(7294);const r={},o=n.createContext(r);function a(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);